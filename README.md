# DynaPart-TP

<img src="src/main/resources/static/logo/logo.png" alt="Logo" width="200" height="200">  <!-- é¡¹ç›®Logo -->

## ğŸš€ é¡¹ç›®ä»‹ç»

DynaPart-TP æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€å¯åŠ¨æ€è°ƒæ•´çš„è½»é‡çº§çº¿ç¨‹æ± æ¡†æ¶ï¼Œä¸“ä¸ºéœ€è¦ç²¾ç»†æ§åˆ¶å¹¶å‘ä»»åŠ¡æ‰§è¡Œçš„Javaåº”ç”¨ç¨‹åºè®¾è®¡ã€‚è¯¥æ¡†æ¶æä¾›äº†ä¸°å¯Œçš„çº¿ç¨‹æ± ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å‚æ•°åŠ¨æ€è°ƒæ•´ã€å®æ—¶ç›‘æ§å’Œçµæ´»çš„ä»»åŠ¡è°ƒåº¦ç­–ç•¥ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- **åŠ¨æ€å‚æ•°è°ƒæ•´**ï¼šæ— éœ€é‡å¯åº”ç”¨ï¼Œå®æ—¶è°ƒæ•´æ ¸å¿ƒçº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ï¼Œç”šè‡³æ˜¯ä»»åŠ¡é˜Ÿåˆ—ç­‰å‚æ•°
- **å¤šé˜Ÿåˆ—æ”¯æŒ**ï¼šå¯åˆ‡æ¢ä¸åŒç±»å‹çš„ä»»åŠ¡é˜Ÿåˆ—ï¼ˆå¦‚é˜»å¡é˜Ÿåˆ—ã€ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰
- **çµæ´»çš„æ‹’ç»ç­–ç•¥**ï¼šæ”¯æŒå¤šç§ä»»åŠ¡æ‹’ç»ç­–ç•¥ï¼Œå¹¶å¯åŠ¨æ€åˆ‡æ¢
- **å®æ—¶ç›‘æ§**ï¼šé€šè¿‡REST APIå’ŒWebSocketå®æ—¶ç›‘æ§çº¿ç¨‹æ± çŠ¶æ€
- **Spring Booté›†æˆ**ï¼šä¸Spring Bootæ¡†æ¶æ— ç¼é›†æˆï¼Œæ”¯æŒè‡ªåŠ¨é…ç½®
- **è½»æ¾æ‰©å±•**ï¼šåªéœ€è¦å®ç°æ¥å£å°±èƒ½è½»æ¾è‡ªå®šä¹‰ä»»åŠ¡é˜Ÿåˆ—ã€æ‹’ç»ç­–ç•¥

## ğŸ’¡ å®ç°äº®ç‚¹

### 1. åŠ¨æ€å‚æ•°è°ƒæ•´æœºåˆ¶
æ¡†æ¶å…è®¸åœ¨è¿è¡Œæ—¶è°ƒæ•´çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ï¼ŒåŒ…æ‹¬æ ¸å¿ƒçº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ã€çº¿ç¨‹ç©ºé—²æ—¶é—´ç­‰ã€‚è¿™äº›è°ƒæ•´ä¼šç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯åº”ç”¨ã€‚

### 2. å®æ—¶ç›‘æ§ç³»ç»Ÿ
é€šè¿‡WebSocketå®ç°äº†çº¿ç¨‹æ± çŠ¶æ€çš„å®æ—¶æ¨é€ï¼Œå®¢æˆ·ç«¯å¯ä»¥å®æ—¶è·å–çº¿ç¨‹æ± çš„å·¥ä½œçŠ¶æ€ã€ä»»åŠ¡é˜Ÿåˆ—é•¿åº¦ç­‰ä¿¡æ¯ã€‚åŒæ—¶æä¾›äº†REST APIç”¨äºæŸ¥è¯¢å’Œè°ƒæ•´çº¿ç¨‹æ± å‚æ•°ã€‚

### 3. å¯è§†åŒ–ç›‘æ§ä¸­å¿ƒ
æä¾›äº†Webç•Œé¢çš„ç›‘æ§ä¸­å¿ƒï¼Œå¯ç›´è§‚æŸ¥çœ‹çº¿ç¨‹æ± çŠ¶æ€ã€é…ç½®å‚æ•°ï¼Œå¹¶æ”¯æŒåœ¨çº¿ä¿®æ”¹é…ç½®ã€‚è®¿é—®`http://localhost:8080/configuration.html`å³å¯è¿›å…¥ç›‘æ§ä¸­å¿ƒã€‚

### 4. å¯æ’æ‹”çš„ç»„ä»¶è®¾è®¡
- **ä»»åŠ¡é˜Ÿåˆ—**ï¼šæ”¯æŒå¤šç§é˜Ÿåˆ—å®ç°ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠ¨æ€åˆ‡æ¢
- **æ‹’ç»ç­–ç•¥**ï¼šæä¾›å¤šç§æ‹’ç»ç­–ç•¥ï¼ˆå¦‚CallerRunsã€DiscardOldestç­‰ï¼‰ï¼Œå¹¶æ”¯æŒè‡ªå®šä¹‰ç­–ç•¥

### 5. çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†
ç²¾ç»†æ§åˆ¶çº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯ï¼Œæ”¯æŒæ ¸å¿ƒçº¿ç¨‹çš„åŠ¨æ€è°ƒæ•´å’Œéæ ¸å¿ƒçº¿ç¨‹çš„è‡ªåŠ¨å›æ”¶ã€‚

### 6. åˆ†åŒºåŒ–é˜Ÿåˆ—æ¨¡å‹ï¼ˆPartitionï¼‰
åˆ†åŒºåŒ–æ˜¯æ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå°†é˜Ÿåˆ—æŠ½è±¡ä¸ºä¸€ç§åˆ†åŒºè¡¨ç°å½¢å¼ã€‚ä»»ä½•é˜Ÿåˆ—åªè¦å®ç°äº†`Partition`æ¥å£ï¼Œå°±å¯ä»¥è‡ªç”±é€‰æ‹©æˆä¸ºåˆ†åŒºé˜Ÿåˆ—æˆ–è€…å•ä¸ªé˜Ÿåˆ—ã€‚

- **çµæ´»çš„åˆ†åŒºç­–ç•¥**ï¼šæ”¯æŒè½®è¯¢ã€éšæœºã€å“ˆå¸Œã€å¡«è°·ç­‰å¤šç§ä»»åŠ¡å…¥é˜Ÿç­–ç•¥
- **é«˜æ•ˆçš„ä»»åŠ¡å‡ºé˜Ÿ**ï¼šæä¾›è½®è¯¢ã€éšæœºã€å‰Šå³°ã€çº¿ç¨‹ç»‘å®šç­‰å‡ºé˜Ÿç­–ç•¥
- **ç»†ç²’åº¦æ§åˆ¶**ï¼šå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠ¨æ€è°ƒæ•´åˆ†åŒºæ•°é‡å’Œå®¹é‡
- **é«˜æ€§èƒ½è®¾è®¡**ï¼šé€šè¿‡å¤šåˆ†åŒºå¹¶è¡Œå¤„ç†æé«˜ååé‡ï¼Œå‡å°‘é”ç«äº‰

### 7. å‘½ä»¤è¡Œäº¤äº’åŠŸèƒ½
æä¾›å‘½ä»¤è¡Œæ¥å£ï¼Œæ”¯æŒåœ¨çº¿æŸ¥è¯¢çº¿ç¨‹æ± çŠ¶æ€ã€ä¿®æ”¹é…ç½®å‚æ•°ç­‰æ“ä½œï¼Œå¦‚`yf info pool`ã€`yf change worker`ç­‰ã€‚

### 8. Redisé›†æˆæ”¯æŒ
æ¡†æ¶æ”¯æŒä¸Redisé›†æˆï¼Œå¯ç”¨äºåˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„çº¿ç¨‹æ± çŠ¶æ€å…±äº«å’Œä»»åŠ¡è°ƒåº¦ã€‚

## ğŸš€ æ€§èƒ½å¯¹æ¯”

é€šè¿‡æµ‹è¯•å¯¹æ¯”ï¼ŒDynaPart-TPçº¿ç¨‹æ± ä¸JDKçº¿ç¨‹æ± ç›¸æ¯”å…·æœ‰æ˜

### æ€§èƒ½ä¼˜åŠ¿
1. **æ›´é«˜ååé‡**ï¼šåœ¨ç›¸åŒé…ç½®ä¸‹ï¼ŒDynaPart-TPå¤„ç†ä»»åŠ¡çš„é€Ÿåº¦æ¯”JDKçº¿ç¨‹æ± å¿«çº¦5%-10%
2. **æ›´å¥½çš„èµ„æºåˆ©ç”¨**ï¼šé€šè¿‡åˆ†åŒºåŒ–è®¾è®¡ï¼Œå‡å°‘çº¿ç¨‹ç­‰å¾…æ—¶é—´ï¼Œæé«˜CPUåˆ©ç”¨ç‡
3. **æ›´ç¨³å®šçš„æ€§èƒ½**ï¼šåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼ŒDynaPart-TPçš„æ€§èƒ½æ³¢åŠ¨æ›´å°

## ğŸ“š ä½¿ç”¨æ–¹æ³•

### 1. Spring Bootç¯å¢ƒé›†æˆ(test_springboot_integrationåŒ…å°±æ˜¯ç”¨æ¥æµ‹è¯•springbooté›†æˆçš„)

#### 1.1é…ç½®æ–‡ä»¶
åœ¨`application.yml`ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```yaml
server:
  port: 8080

#çº¿ç¨‹æ± é…ç½®
yf:
  thread-pool:
    pool:
      enabled: true
      coreNums: 5    #çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹æ•°
      maxNums: 10    #çº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹æ•°
      poolName: yf-thread-pool   #çº¿ç¨‹æ± åç§°
      threadName: yf-thread      #çº¿ç¨‹åç§°
      isDaemon: true      #æ˜¯å¦æ˜¯å®ˆæŠ¤çº¿ç¨‹
      coreDestroy: false  #æ ¸å¿ƒçº¿ç¨‹æ˜¯å¦é”€æ¯
      aliveTime: 5000        #çº¿ç¨‹å­˜æ´»æ—¶é—´ï¼ˆå•ä½ï¼šmsï¼‰
      rejectStrategyName: callerRuns   #æ‹’ç»ç­–ç•¥åç§°
    queue:     #(ç”±äºqueueæ¯”è¾ƒé‡è¦ï¼Œæ‰€ä»¥ä¸poolå’Œmonitorä¸€ä¸ªå±‚çº§)
      partitioning: true  #æ˜¯å¦åˆ†åŒºåŒ–(å¦‚æœæ˜¯falseï¼Œåªéœ€è¦è¯»å–capacityå’ŒqueueName)
      partitionNum: 10      #åˆ†åŒºæ•°é‡
      capacity: 500         #é˜Ÿåˆ—å®¹é‡ï¼ˆä¸å†™ä»£è¡¨nullï¼Œä¸ºæ— ç•Œï¼‰
      queueName: linked_plus     #é˜Ÿåˆ—åç§°
      offerStrategy:       #å…¥é˜Ÿç­–ç•¥
      pollStrategy:        #å‡ºé˜Ÿç­–ç•¥
      removeStrategy:      #ç§»é™¤ç­–ç•¥
    monitor:
      enabled: true       #æ˜¯å¦å¼€å¯ç›‘æ§
      fixedDelay: 5000    #åå°åƒå‰ç«¯æ¨é€çº¿ç¨‹çŠ¶æ€ä¿¡æ¯çš„é—´éš”æ—¶é—´(å•ä½ï¼šms)
      qReplaceable: false  #æ˜¯å¦å¯æ›´æ¢é˜Ÿåˆ—     é»˜è®¤æ˜¯å¼€å¯çš„ï¼ˆä¸å†™è¿™ä¸ªkeyé»˜è®¤å¼€å¯ï¼Œå†™äº†keyååªæœ‰valueä¸ºtrueæ‰æ˜¯å¼€å¯ï¼Œä»¥ä¸‹åŒç†ï¼‰
      rsReplaceable: false #æ˜¯å¦å¯æ›´æ¢æ‹’ç»ç­–ç•¥
    service-registry:      #æ˜¯å¦å¼€å¯æœåŠ¡æ³¨å†Œ
        enabled: true

```

#### 1.2ä½¿ç”¨çº¿ç¨‹æ± 

æ³¨å…¥`ThreadPool`å®ä¾‹å¹¶ä½¿ç”¨ï¼š

```java
@Autowired
private ThreadPool threadPool;

// æ‰§è¡Œä»»åŠ¡
threadPool.execute(() -> {
    // ä»»åŠ¡é€»è¾‘
});
//å¦‚æœæ˜¯ä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œé‚£ä¹ˆåº”ä¼ å…¥PriorityTaskå¯¹è±¡èƒ½æ‰‹åŠ¨æŒ‡å®šä¼˜å…ˆçº§ï¼ˆæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼‰ï¼Œç¤ºä¾‹ï¼š
//Runnable r = () -> {};        //ä»»åŠ¡ï¼Œè¿”å›å€¼ ï¼Œä¼˜å…ˆçº§
//PriorityTask pt = new PriorityTask(r, null,10);
//threadPool.executeThreadFirst(pt);


// æäº¤æœ‰è¿”å›å€¼çš„ä»»åŠ¡
Future<?> future = threadPool.submit(() -> {
    // ä»»åŠ¡é€»è¾‘
    return result;
});
//å¦‚æœæ˜¯ä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œé‚£ä¹ˆåº”ä¼ å…¥PriorityTaskå¯¹è±¡èƒ½æ‰‹åŠ¨æŒ‡å®šä¼˜å…ˆçº§ï¼ˆæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼‰ï¼Œç¤ºä¾‹ï¼š
//Callable c = () -> {};        //ä»»åŠ¡ï¼Œè¿”å›å€¼ ï¼Œä¼˜å…ˆçº§
//PriorityTask pt = new PriorityTask(c,10);
//threadPool.executeThreadFirst(pt);
```

### 1.3ç›‘æ§çº¿ç¨‹æ± 

#### REST API
- è·å–çº¿ç¨‹æ± ä¿¡æ¯ï¼š`GET /monitor/pool`
- è·å–é˜Ÿåˆ—ä»»åŠ¡æ•°é‡ï¼š`GET /monitor/tasks`
- è°ƒæ•´çº¿ç¨‹å‚æ•°ï¼š`PUT /monitor/worker`
- åˆ‡æ¢é˜Ÿåˆ—ï¼š`PUT /monitor/queue`
- åˆ‡æ¢æ‹’ç»ç­–ç•¥ï¼š`PUT /monitor/rejectStrategy`

#### WebSocketå®æ—¶ç›‘æ§
è¿æ¥`/monitor/threads`ç«¯ç‚¹ï¼Œå®æ—¶æ¥æ”¶çº¿ç¨‹æ± çŠ¶æ€æ›´æ–°ã€‚



è¿™ç§æ–¹å¼ä¼šä¼˜å…ˆä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„`server.port`ï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰åˆ™é»˜è®¤ä½¿ç”¨8080ç«¯å£ã€‚

### 2. éSpring Bootç¯å¢ƒä½¿ç”¨

```java
// åˆ›å»ºçº¿ç¨‹å·¥å‚
ThreadFactory threadFactory = new ThreadFactory("worker", false, false, 6000);
                                            // çº¿ç¨‹åç§°ï¼Œæ˜¯å¦å®ˆæŠ¤çº¿ç¨‹ï¼Œæ ¸å¿ƒçº¿ç¨‹æ˜¯å¦é”€æ¯ï¼Œç©ºé—²æ—¶é—´ï¼ˆå•ä½ï¼šmsï¼‰


singleQueue.setCapacity(100); // è®¾ç½®é˜Ÿåˆ—å®¹é‡ï¼Œå¦‚æœä¸è®¾ç½®åˆ™ä¸ºæ— ç•Œé˜Ÿåˆ—

// æˆ–åˆ›å»ºåˆ†åŒºåŒ–é˜Ÿåˆ—
PartiFlow<Runnable> partitionedQueue = new PartiFlow<>(
    10, // åˆ†åŒºæ•°é‡
    1000, // æ€»å®¹é‡
    â€œlinked_plusâ€, // é˜Ÿåˆ—åç§°
    OfferStrategy.ROUND_ROBIN, // å…¥é˜Ÿç­–ç•¥
    PollStrategy.ROUND_ROBIN, // å‡ºé˜Ÿç­–ç•¥
    RemoveStrategy.ROUND_ROBIN // ç§»é™¤ç­–ç•¥
);

// åˆ›å»ºæ‹’ç»ç­–ç•¥
RejectStrategy rejectStrategy = new CallerRunsStrategy();

// åˆ›å»ºçº¿ç¨‹æ±                             
ThreadPool threadPool = new ThreadPool(
    5, 20, // æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œæœ€å¤§çº¿ç¨‹æ•°
    "DynaPartPool", // çº¿ç¨‹æ± åç§°
    threadFactory, // çº¿ç¨‹å·¥å‚
    singleQueue, // ä»»åŠ¡é˜Ÿåˆ—ï¼ˆæˆ–ä½¿ç”¨partitionedQueueï¼‰
    rejectStrategy // æ‹’ç»ç­–ç•¥
);

// ä½¿ç”¨çº¿ç¨‹æ± 
threadPool.execute(() -> {
    // ä»»åŠ¡é€»è¾‘
});

Future<?> future = threadPool.submit(() -> {
    // ä»»åŠ¡é€»è¾‘
    return "Result";
});
```
### 2.1 å‘½ä»¤è¡Œ

#### ä¸»è¦å‘½ä»¤
- yf info pool //æ‰“å°çº¿ç¨‹æ± ä¿¡æ¯
- yf info worker  //æ‰“å°çº¿ç¨‹ä¿¡æ¯
- yf info taskNum  //æ‰“å°é˜Ÿåˆ—ä»»åŠ¡æ•°é‡
- yf change worker -coreNums 2 -maxNums 5 -coreDestroy true......(å¦‚æœæœ‰å‚æ•°æ²¡å†™å°±ç›´æ¥èµ‹å€¼ä¸ºnull)  //æ”¹å˜çº¿ç¨‹å‚æ•°
- yf change queue linked(é˜Ÿåˆ—åç§°ä¸¾ä¾‹)  //æ”¹å˜é˜Ÿåˆ—
- yf change rejectstrategy callerRuns(æ‹’ç»ç­–ç•¥åç§°ä¸¾ä¾‹)   //æ”¹å˜æ‹’ç»ç­–ç•¥


## ğŸ”§ å¼€å‘è€…æ‰©å±•è¯´æ˜

### è‡ªå®šä¹‰ä»»åŠ¡é˜Ÿåˆ—
è¦å®ç°è‡ªå®šä¹‰ä»»åŠ¡é˜Ÿåˆ—ï¼Œåªéœ€ç»§æ‰¿`Partition`æŠ½è±¡ç±»å¹¶å®ç°å…¶æŠ½è±¡æ–¹æ³•ï¼š

```java
// Spring Bootç¯å¢ƒä¸‹ä½¿ç”¨è¯¥æ³¨è§£å¹¶æŒ‡å®šé˜Ÿåˆ—åç§°
@PartitionBean("custom")
public class CustomQueue<T> extends Partition<T> {
    // éœ€è¦ä¿è¯çº¿ç¨‹å®‰å…¨

    public CustomQueue() {
    }

    @Override
    public Boolean offer(T task) {

    }

    // å¯é€‰ï¼šå®ç°warningæ–¹æ³•ï¼Œåœ¨æ·»åŠ ä»»åŠ¡åæ‰§è¡Œè­¦å‘Šé€»è¾‘
    public void warning() {

    }

    @Override
    public T getEle(Integer waitTime) throws InterruptedException {

    }

    @Override
    public Boolean removeEle() {

    }

    @Override
    public int getEleNums() {
    }

    @Override
    public void lockGlobally() {
    }

    @Override
    public void unlockGlobally() {
    }

    @Override
    public Integer getCapacity() {
    }

    @Override
    public void setCapacity(Integer capacity) {
    }
}
```

ç„¶åï¼Œåœ¨`OfQueue`å¸¸é‡ç±»ä¸­æ³¨å†Œä½ çš„è‡ªå®šä¹‰é˜Ÿåˆ—ï¼ˆæœ¬é¡¹ç›®å¼€å‘è€…éœ€è¦ï¼Œä½¿ç”¨è€…éœ€è¦åªéœ€è¦å°†map.put(:"é˜Ÿåˆ—åç§°",é˜Ÿåˆ—ç±»å‹)å°±è¡Œï¼‰ï¼š

```java
public class OfQueue {
    public final static String CUSTOM = "custom";
    // å…¶ä»–é˜Ÿåˆ—ç±»å‹...
    
    static {
        // å·²æœ‰çš„é˜Ÿåˆ—æ³¨å†Œ
        TASK_QUEUE_MAP.put(LINKED_MINI, LinkedBlockingQMini.class);
        TASK_QUEUE_MAP.put(LINKED_PLUS, LinkedBlockingQPlus.class);
        TASK_QUEUE_MAP.put(PRIORITY, PriorityBlockingQueue.class);
        
        // æ³¨å†Œè‡ªå®šä¹‰é˜Ÿåˆ—
        TASK_QUEUE_MAP.put(CUSTOM, CustomQueue.class);
    }
}
```

### è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥
è¦å®ç°è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ï¼Œåªéœ€ç»§æ‰¿`RejectStrategy`æŠ½è±¡ç±»ï¼š

```java
// Spring Bootç¯å¢ƒä¸‹ä½¿ç”¨è¯¥æ³¨è§£å¹¶æŒ‡å®šç­–ç•¥åç§°
@RejectStrategyBean("custom")
public class CustomRejectStrategy extends RejectStrategy {
    @Override
    public void reject(Runnable task) {

    }
}
```

ç„¶åï¼Œåœ¨`OfRejectStrategy`å¸¸é‡ç±»ä¸­æ³¨å†Œä½ çš„è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ï¼ˆæ³¨å†Œé€»è¾‘ä¸ä¸Šè¿°é˜Ÿåˆ—ä¸€è‡´ï¼‰ï¼š

```java
public class OfRejectStrategy {
    public final static String CUSTOM = "custom";
    // å…¶ä»–æ‹’ç»ç­–ç•¥...
    
    static {
        // å·²æœ‰çš„ç­–ç•¥æ³¨å†Œ
        REJECT_STRATEGY_MAP.put(CALLER_RUNS, CallerRunsStrategy.class);
        REJECT_STRATEGY_MAP.put(DISCARD_OLDEST, DiscardOldestStrategy.class);
        REJECT_STRATEGY_MAP.put(DISCARD, DiscardStrategy.class);
        
        // æ³¨å†Œè‡ªå®šä¹‰ç­–ç•¥
        REJECT_STRATEGY_MAP.put(CUSTOM, CustomRejectStrategy.class);
    }
}
```

## ğŸ“š æŠ€æœ¯æ–‡æ¡£

### æ ¸å¿ƒæŠ€æœ¯å®ç°

#### 1. çº¿ç¨‹æ± æ ¸å¿ƒå®ç°
- **åŠ¨æ€å‚æ•°è°ƒæ•´**ï¼šé€šè¿‡`ThreadPool`ç±»ä¸­çš„æ–¹æ³•å®ç°æ ¸å¿ƒçº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ç­‰å‚æ•°çš„åŠ¨æ€è°ƒæ•´
- **çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šé€šè¿‡`Worker`ç±»ä¸­çš„å¾ªç¯ä»»åŠ¡å’Œè¶…æ—¶æœºåˆ¶å®ç°çº¿ç¨‹çš„åˆ›å»ºå’Œè‡ªåŠ¨å›æ”¶
- **ä»»åŠ¡è°ƒåº¦**ï¼šä½¿ç”¨`Partition`æ¥å£å®šä¹‰çš„é˜Ÿåˆ—å®ç°ä»»åŠ¡çš„å­˜å‚¨å’Œè°ƒåº¦

#### 2. å¹¶å‘æ§åˆ¶æœºåˆ¶
- ä½¿ç”¨`ReentrantLock`å’Œ`ReadWriteLock`ä¿è¯çº¿ç¨‹å®‰å…¨
- ä½¿ç”¨`Condition`å®ç°çº¿ç¨‹é—´çš„é€šä¿¡å’Œç­‰å¾…å”¤é†’æœºåˆ¶
- é‡‡ç”¨ç²¾ç»†çš„é”ç²’åº¦ï¼Œé¿å…å…¨å±€é”å¸¦æ¥çš„æ€§èƒ½ç“¶é¢ˆ,ä¾‹å¦‚çº¿ç¨‹æ± ä»»åŠ¡æäº¤åˆ©ç”¨casä»¥åŠç»„ä»¶å†…éƒ¨é”ã€é˜Ÿåˆ—ä½¿ç”¨å¤´å°¾é”ä»¥åŠå¤´é”å°¾casç­‰ç­‰

#### 3. ç»„ä»¶è®¾è®¡æ¨¡å¼
- **ç­–ç•¥æ¨¡å¼**ï¼šç”¨äºå®ç°ä¸åŒçš„æ‹’ç»ç­–ç•¥å’Œä»»åŠ¡é˜Ÿåˆ—
- **å·¥å‚æ¨¡å¼**ï¼šé€šè¿‡`ThreadFactory`åˆ›å»ºçº¿ç¨‹
- **æ¨¡æ¿æ–¹æ³•**ï¼šåœ¨Partitionä¸­å®šä¹‰æ·»åŠ ä»»åŠ¡åæŠ¥è­¦çš„æ¨¡æ¿æ–¹æ³•ï¼Œå…·ä½“çš„é€»è¾‘å­ç±»å®ç°
- **è§‚å¯Ÿè€…æ¨¡å¼**ï¼šé€šè¿‡WebSocketå®ç°çº¿ç¨‹æ± çŠ¶æ€çš„å®æ—¶æ¨é€

#### 4. Spring Booté›†æˆ
- ä½¿ç”¨`@ConfigurationProperties`å’Œ`@AutoConfiguration`å®ç°è‡ªåŠ¨é…ç½®
- é€šè¿‡`@ConditionalOnProperty`å’Œ`@Conditional`å®ç°æ¡ä»¶è£…é…
- æä¾›`ThreadPoolProperties`ç±»è®©ç”¨æˆ·å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è‡ªå®šä¹‰çº¿ç¨‹æ± å‚æ•°

#### 5. ç›‘æ§ç³»ç»Ÿ
- **REST API**ï¼šæä¾›HTTPæ¥å£ç”¨äºæŸ¥è¯¢å’Œè°ƒæ•´çº¿ç¨‹æ± å‚æ•°
- **WebSocket**ï¼šé€šè¿‡`ThreadPoolWebSocketHandler`å®ç°çº¿ç¨‹æ± çŠ¶æ€çš„å®æ—¶æ¨é€
- **å‰ç«¯ç›‘æ§ç•Œé¢**ï¼šä½¿ç”¨HTMLã€Tailwind CSSå’ŒJavaScriptå®ç°å¯è§†åŒ–ç›‘æ§ç•Œé¢ï¼ˆè±†åŒ…ç”Ÿæˆçš„å“¦ï¼‰

#### 6. åˆ†åŒºåŒ–æ¦‚å¿µ
- å°†é˜Ÿåˆ—éƒ½æŠ½è±¡ä¸º`Partition`ï¼Œåˆ©ç”¨æŠ½è±¡åŸºç±»ä»¥åŠè£…é¥°å™¨æ¨¡å¼ï¼Œå¯ä»¥è½»æ¾å°†é˜Ÿåˆ—åˆ†åŒºåŒ–ï¼Œé€šè¿‡`PartiFlow`ç±»å®ç°å¤šé˜Ÿåˆ—å¹¶è¡Œå¤„ç†
- æ”¯æŒå¤šç§åˆ†åŒºç­–ç•¥ï¼šè½®è¯¢ã€éšæœºã€Hashã€å¡«è°·ç­‰å…¥é˜Ÿç­–ç•¥ï¼›è½®è¯¢ã€éšæœºã€å‰Šå³°ç­‰å‡ºé˜Ÿç­–ç•¥
- æå¤§é™ä½é”ç²’åº¦ï¼Œæå‡ç³»ç»Ÿå¹¶å‘æ€§èƒ½å’Œç¨³å®šæ€§



